\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{vdr}[2019/07/19 Librairie pour dessiner le ventilateur VDR-4]

\RequirePackage{tikz}
\RequirePackage{amssymb}

\usetikzlibrary{shapes}

\tikzset{
	aknob/.pic={
		\begin{scope}[
				scale=0.4,
				every node/.style={
					transform shape
				}
			]

		\draw [pic actions] (0,0) circle [radius=1.35cm];
		\draw (0,0) circle [radius=.65cm];

		\draw (90:1) node {$\blacktriangle$};
		\foreach \h in {1,...,11}{
			\draw (90 - \h*30:1) node [rotate=-30*\h] {\h};
		}

		\node at (0:0) {\huge \tikzpictext};
		\end{scope}
	}
}

\tikzset{
	screw/.pic={
		\node [
			transform shape, 
			draw, 
			circle, 
			inner sep=0.02em] {+};
	}
}

\tikzset{
	master/.pic={
		\node [
			draw, 
			shape=star, 
			star point height=0.6mm, 
			star points=30, 
			minimum width=1cm] {};
		\node [
			draw, 
			shape=regular polygon, 
			regular polygon sides=6,
			minimum width=1.3cm] {};
		}
}

\tikzset{
	pushbutton/.pic={
		\draw circle [radius=1.8mm];
		\node [
			draw, 
			shape=regular polygon, 
			regular polygon sides=6,
			minimum width=5mm] {};
		}
}

\tikzset{
	toggle/.pic={
		\draw circle [radius=1.8mm];
		\node [
			draw, 
			shape=regular polygon, 
			regular polygon sides=6,
			minimum width=5mm] {};
		\draw [fill=white] (0,0) -- (-1mm, 0) -- (-1.5mm, -5mm) -- (1.5mm, -5mm) -- (1mm, 0) -- (0, 0);
		}
}

\tikzset{
	connector/.pic={
		\node [
			draw, 
			shape=regular polygon, 
			regular polygon sides=6,
			minimum width=0.6cm] {};
		\draw (0,0) circle [radius=1.9mm];
		\draw (0,0) circle [radius=1.4mm];
		}
}

\tikzset{
	vdr/.pic={

		%%%%%%%%%%%%%%
		% Dimensions %
		%%%%%%%%%%%%%%

		\def\panelWidth{14cm}
		\def\panelHeight{7cm}
		\def\sDist{3mm}
		\def\nDist{20mm}
		\def\cSpace{7.5mm}

		%%%%%%%%%%%%%%%
		% Coordinates %
		%%%%%%%%%%%%%%%

		\coordinate (-NO) at (0,0);
		\coordinate (-NE) at (\panelWidth,0);
		\coordinate (-SE) at (\panelWidth, -\panelHeight);
		\coordinate (-SO) at (0,-\panelHeight);

		\path (-NO) ++(\sDist, -\sDist) coordinate (-SNO);
		\path (-NE) ++(-\sDist, -\sDist) coordinate (-SNE);
		\path (-SO) ++(\sDist, \sDist) coordinate (-SSO);
		\path (-SE) ++(-\sDist, \sDist) coordinate (-SSE);
		\path (-SNO) ++(0.5 * \panelWidth - \sDist, 0) coordinate (-SN);
		\path (-SSO) ++(0.5 * \panelWidth - \sDist, 0) coordinate (-SS);

		\path (-NO) ++(\nDist, -\nDist) coordinate (-F) 
		foreach \x in {I, E, O, D} {
			++(\nDist, 0) coordinate (-\x)
		}
			++(\nDist, 0.5) coordinate (-C)
		;

		\path (-SO) ++(\nDist, \nDist) coordinate (-A); 
		\path (-A) ++(\nDist, 0) coordinate (-M); 
		\path (-M) ++(\nDist, 3mm) coordinate (-N); 
		\path (-N) ++(0.35 * \nDist, -6mm) coordinate (-P); 
		\path (-N) ++(-0.35 * \nDist, -6mm) coordinate (-R); 
		\path (-A) ++(3 * \nDist, 0) coordinate (-i); 
		\path (-i) ++(\nDist, 0) coordinate (-e); 

		\path (-C) ++(0, -\nDist) coordinate (-C1) 
		foreach \x in {2, 3, 4} {
			++(0, -\cSpace) coordinate (-C\x)
		};

%%%%%%%%%%%
% Drawing %
%%%%%%%%%%%

		\draw [double] (-NO) rectangle (-SE);

		\foreach \x in {SNO, SNE, SSO, SSE, SN, SS} {
			\draw (-\x) pic [transform shape, scale=0.5] {screw};
		}

		\foreach \x in {F, I, E, O, D, C, A, i, e} {
			\draw (-\x) pic [transform shape] {aknob};
		}

		\draw (-M) pic [transform shape] {master};

		\foreach \x in {P, R} {
			\draw (-\x) pic [transform shape] {pushbutton};
		}

		\draw (-N) pic [transform shape] {toggle};
	}
}

\tikzset{
	box/.style={
		fill=black!70,
		rounded corners
	},
	frame/.style={
		fill=black!65,
		draw=black,
		even odd rule
	},
	screen/.style={
		draw,
		minimum width=2.5cm,
		minimum height=1.5cm,
		rounded corners,
		fill=black!0
	},
	grad/.style={
		xshift=-0.5em,
		font=\tiny \ttfamily,
		white,
		inner sep=0.5mm
	},
	plabel/.style={
		font=\tiny \ttfamily
	},
	pScale/.style={
			dash pattern=on 1mm off 0.3mm,
			line width=2mm,
			draw = white
		},
	multimeter/.pic={
		\def\dxshift{5mm}
		\def\ScrenWidth{2.5}
		\def\ScreenHeight{1.5}

		%\coordinate (frame) at (0,0);
		\node [screen] (screen) at (0,0) {};

		\path [frame] (0,0) circle [radius=2.3cm] (0,0) circle [radius=2cm];
		\path [box] (0,0) circle [radius=2cm] (-0.5 * \ScrenWidth,-0.5 * \ScreenHeight) rectangle  ++(\ScrenWidth, \ScreenHeight);

		\node [above, white] at (screen.north) {\tiny cmH2O/hPa};

		%\node [grad] (g50) at (screen.north west) {50};
		%\node [grad] (g0) at (screen.south west) {0};
		%\draw [pScale]	(g0) -- (g50) node [grad, left=0.0mm, pos=0.6, inner sep=0mm] {30};

		%\node [below, white, align=left, font=\tiny] at (screen.south) {Percussionaire\\Corporation};

		\begin{scope}[shift={(screen)}]

			\node (Pmoy) at  (-0.5,0) {};
			\node (Pmi) at (-0.5, \dxshift) {};
			\node (Pme) at (-0.5, -\dxshift) {};
			\node (Ampl) at (1.3 *\dxshift, \dxshift)  {};
			\node (Fperc) at (1.3 *\dxshift, 0)  {};

			\node [plabel] (aip) at (0.5\dxshift, \dxshift) {AIP};
			\node [plabel] (aep) at (0.5\dxshift, -\dxshift) {AEP};
		\end{scope}
	}
}

\tikzset{phasitron/.pic={
\begin{scope}[y=0.80pt, x=0.80pt, shift={(-131.65625,-2.50001)},every node/.style=red]
  \draw (132.0342,134.5973)-- (132.0342,101.2173) 
	coordinate (-Pt) 
	-- (132.0342,68.2862)  -- (149.9645,68.2862) -- (149.9645,101.2173) --
    (149.9645,101.6426) -- (149.9645,134.5973) -- cycle;
  \draw (149.9645,127.4867) --
    (149.9645,75.3732) -- (157.6421,75.3732) --  (157.6421,127.4867) -- cycle;
  \draw (280.1300,142.9364) -- (209.9209,142.8656) --
    (202.2196,135.1880) -- (202.2196,101.2173) -- (202.2196,67.6956) --
    (209.9209,59.9943) -- (280.1300,59.9471) -- (280.1300,101.2646) -- cycle;
  \draw (282.6104,145.7004) .. controls (280.9258,145.0695) and
    (280.5902,144.0978) .. (280.2717,143.1254) -- (280.2717,101.5244) --
    (280.2717,60.2542) .. controls (280.5902,59.2818) and (280.9258,58.3337) ..
    (282.6104,57.7028) -- (441.6911,57.7028) -- (441.8328,101.1465) --
    (441.8328,101.6898) -- (441.6911,145.7004) -- cycle;
  \draw
    (450.9042,161.6226) -- (441.6911,145.7004) -- (441.7619,100.9339) --
    (441.6911,57.1831) -- (450.9042,41.2609) -- (468.7872,41.2609) --
    (468.8580,100.9339) -- (468.7872,161.6226) -- cycle;

%Capuchon arri√®re

  \draw
    (484.1189,148.8613) .. controls (479.7890,148.7801) and (475.4995,146.3698) ..
    (475.2837,141.8452) -- (475.2837,128.4034) .. controls (475.3679,124.5335) and
    (468.9590,124.2106) .. (468.8581,128.4034) -- (468.8581,110.6621) --
    (468.8581,92.2358) -- (468.8581,74.4709) .. controls (468.9590,78.6637) and
    (475.3679,78.3409) .. (475.2837,74.4709) -- (475.2837,61.0528) .. controls
    (475.7154,52.0034) and (492.4197,51.3538) .. (493.2139,61.0528) --
    (493.2139,92.2358) -- (493.2139,110.6621) -- (493.2139,141.8452) .. controls
    (492.8168,146.6947) and (488.4487,148.9425) .. (484.1189,148.8613) -- cycle;

  \draw (157.6421,135.1879) -- (157.6421,101.2173) --
    (157.6421,67.6956) -- (202.2196,67.6956) -- (202.2196,101.2173) --
    (202.2196,101.6426) -- (202.2196,135.1879) -- cycle;

  \draw (169.2068,67.6956) rectangle (184.3909,65.1783);
  \draw (172.1672,64.9932) rectangle (181.9336,61.8462);

  \draw
    (169.8210,61.8370) -- 
		(169.8210,58.4116) -- 
		(170.6736,56.9469) --
    %(176.3670,56.9469) -- 
		%(177.5222,56.9469) -- 
		(183.2156,56.9469) coordinate [midway] (-M) --
    (184.0682,58.4116) -- (184.0682,61.8370) -- (177.5222,61.8370) --
    (176.3670,61.8370) -- cycle;
  \draw[cm={{0.0,1.0,1.0,0.0,(0.0,0.0)}}]
    (93.8497,493.2139) rectangle (109.0338,495.7312);
  \draw[cm={{0.0,1.0,1.0,0.0,(0.0,0.0)}}]
    (96.8101,495.9163) rectangle (106.5765,499.0633);
  \draw
    (499.0725,94.4639) -- 
		(502.4980,94.4639) -- 
		(503.9626,95.3165) --
    %(503.9626,101.0099) -- 
		%(503.9626,102.1651) -- 
		(503.9626,107.8585) coordinate [midway] (-S) --
    (502.4980,108.7112) -- (499.0725,108.7112) -- (499.0725,102.1651) --
    (499.0725,101.0099) -- cycle;

  \draw %Expiration
    (222.2656,59.9707) -- (222.2656,15.6530) -- (225.2093,15.6530) --
    (225.2093,11.6134) -- (222.2656,11.6134) -- (222.2656,9.6527) --
    (225.2093,5.4240) -- 
		(240.9589,5.4240) -- 
		(247.5768,5.4240)  coordinate [midway] (-E) --
    (263.3049,5.4240) -- (266.2486,9.6527) -- (266.2486,11.6134) --
    (263.3049,11.6134) -- (263.3049,15.6530) -- (266.2486,15.6530) --
    (266.2486,59.9707) -- (247.5768,59.9707) -- (240.9589,59.9707) -- cycle;
  \draw (225.2093,15.6530) rectangle (263.3049,11.6134);

  \draw %Appel d'air
    (389.1975,57.4430) -- (389.1975,13.1253) -- (392.1411,13.1253) --
    (392.1411,9.0857) -- (389.1975,9.0857) -- (389.1975,7.1249) --
    (392.1411,2.8963) -- 
		(407.8908,2.8963) -- 
		(414.5086,2.8963) coordinate [midway] (-A) --
    (430.2367,2.8963) -- 
		(433.1804,7.1249) -- (433.1804,9.0857) --
    (430.2367,9.0857) -- (430.2367,13.1253) -- (433.1804,13.1253) --
    (433.1804,57.4430) -- (414.5086,57.4430) -- (407.8908,57.4430) -- cycle;
  \draw 
	(392.1411,13.1253) rectangle (430.2367,9.0857);
\end{scope}}
}

\tikzset{
	venturi-avance/.pic={
		\begin{scope}[
				y=0.80pt, 
				x=0.80pt, 
				fill=white
				]

		% Venturi haut
  \path[draw, fill] (298.6966,180.3485) -- (298.6966,168.4636) .. controls
    (294.7650,159.3595) and (289.6517,156.1639) .. (284.3156,154.0826) --
    (102.9553,160.4742) -- (108.0152,165.2678) .. controls (109.8802,160.8210) and
    (115.5502,160.9085) .. (115.4721,167.6646) -- (153.8214,168.4636) --
    (158.0824,172.9909) -- (264.8132,172.6868) -- (264.9046,180.3485) --
    cycle(326.1270,157.2784) -- (334.6491,157.2784) -- (334.9154,150.3542) --
    (339.7090,150.3542) -- (340.2417,157.2784) -- (346.1006,157.4115) --
    (346.1006,151.4194) -- (349.2964,151.4194) -- (349.2964,155.1479) --
    (351.4269,155.1479) -- (351.4269,147.9573) -- (305.6208,148.2237) --
    (314.3445,157.2784) -- (318.3230,157.2784) -- cycle;

		% Venturi bas
  \path[draw, fill] (298.6966,107.9524) -- (298.6966,119.8373) .. controls
    (294.7650,128.9414) and (289.6517,132.1370) .. (284.3156,134.2183) --
    (102.9553,127.8268) -- (108.0152,123.0331) .. controls (109.8802,127.4800) and
    (115.5502,127.3924) .. (115.4721,120.6363) -- (153.8214,119.8373) --
    (158.0824,115.3100) -- (264.8132,115.6142) -- (264.9046,107.9524) --
    cycle(326.1270,131.0225) -- (334.6491,131.0225) -- (334.9154,137.9468) --
    (339.7090,137.9468) -- (340.2417,131.0225) -- (346.1006,130.8894) --
    (346.1006,136.8815) -- (349.2964,136.8815) -- (349.2964,133.1531) --
    (351.4269,133.1531) -- (351.4269,140.3436) -- (305.6208,140.0772) --
    (314.3445,131.0225) -- (318.3230,131.0225) -- cycle;

		% Joint √©tanch√©it√©
  \path[draw] 
			(110.6047,163.2342) %node [red] {.}
			.. controls (109.3265,163.9412) and (108.8612,165.5497) .. (109.5645,166.8299) % node [blue] {.}
			.. controls (110.2679,168.1102) and (111.8750,168.5801) .. (113.1572,167.8805) % node [green] {.}
			.. controls (114.4395,167.1808) and (114.9140,165.5752) .. (114.2182,164.2909) %node [purple] {.}
			.. controls (113.5223,163.0066) and (111.9180,162.5274) .. (110.6317,163.2196);

		% Joint √©tanch√©it√©
  %\path[] 
	%		(109.5645,166.8299) node [red] {.} --
	%		 (114.2182,164.2909) node [purple] {.} node [midway] {A};

		% Joint d'√©tanch√©it√©
  \path[draw] (110.6047,125.0667) .. controls
    (109.3265,124.3597) and (108.8612,122.7512) .. (109.5645,121.4710) .. controls
    (110.2679,120.1907) and (111.8750,119.7209) .. (113.1572,120.4205) .. controls
    (114.4395,121.1201) and (114.9140,122.7258) .. (114.2182,124.0100) .. controls
    (113.5223,125.2943) and (111.9180,125.7735) .. (110.6317,125.0813);

		% Diaphragme haut
  \path[draw, fill=black] (363.3766,184.7145) --
    (363.3766,188.9755) .. controls (362.2290,189.7703) and (362.0061,190.5929) ..
    (362.0699,191.5680) .. controls (362.1247,192.5993) and (363.1488,193.7926) ..
    (364.2932,193.8282) .. controls (366.0270,193.7868) and (367.1112,191.9834) ..
    (366.8691,190.5941) .. controls (366.6251,189.8495) and (366.4087,189.4803) ..
    (365.5071,188.7092) -- (365.2408,182.5839) .. controls (357.2508,179.9575) and
    (355.5255,173.1991) .. (356.1275,169.1351) -- (356.1120,166.5109) --
    (357.4590,166.4719) -- (357.4257,160.2967) -- (356.0109,160.2967) --
    (356.1274,147.9630) -- (351.8664,147.9630) -- (351.6001,155.2867) --
    (349.7358,155.1535) -- (349.6027,152.7567) -- (349.7358,151.2920) --
    (346.4069,151.5583) -- (346.2738,157.1509) -- (346.9395,161.8114) .. controls
    (348.0804,163.9059) and (349.5816,164.5590) .. (351.0674,165.2735) .. controls
    (351.0694,174.1074) and (358.2730,182.5097) .. (363.3765,184.7144) --
    (363.3765,184.7145) -- cycle;

		% Diafragme bas
  \path[draw, fill=black] (363.3766,103.5864) --
    (363.3766,99.3254) .. controls (362.2290,98.5306) and (362.0061,97.7080) ..
    (362.0699,96.7329) .. controls (362.1247,95.7016) and (363.1488,94.5084) ..
    (364.2932,94.4727) .. controls (366.0270,94.5141) and (367.1112,96.3175) ..
    (366.8691,97.7068) .. controls (366.6251,98.4515) and (366.4087,98.8206) ..
    (365.5071,99.5918) -- (365.2408,105.7170) .. controls (357.2508,108.3434) and
    (355.5255,115.1018) .. (356.1275,119.1659) -- (356.1120,121.7900) --
    (357.4590,121.8290) -- (357.4257,128.0042) -- (356.0109,128.0042) --
    (356.1274,140.3379) -- (351.8664,140.3379) -- (351.6001,133.0143) --
    (349.7358,133.1474) -- (349.6027,135.5442) -- (349.7358,137.0090) --
    (346.4069,136.7426) -- (346.2738,131.1500) -- (346.9395,126.4896) .. controls
    (348.0804,124.3950) and (349.5816,123.7419) .. (351.0674,123.0274) .. controls
    (351.0694,114.1935) and (358.2730,105.7912) .. (363.3765,103.5865) --
    (363.3765,103.5864) -- cycle;

		% Arri√®re du venturi
  \path[draw=gray!50, fill] (298.6966,119.8373) -- (318.4561,119.8373) --
    (318.3229,131.0225) -- (326.1270,131.0225) -- (326.2601,113.3622) --
    (318.4561,107.9524) -- (298.6966,107.9524) -- (298.6966,107.9524);

		% Arri√®re haut du venturi
  \path[draw=gray!50, fill] (298.6966,168.4636) -- (318.4561,168.4636) --
    (318.3229,157.2784) -- (326.1270,157.2784) -- (326.2601,174.9387) --
    (318.4561,180.3485) -- (298.6966,180.3485) -- (298.6966,180.3485);


		\end{scope}
		}
	}

\tikzset{
	venturi-recule/.pic={
		\begin{scope}[
				draw, 
				fill=white, 
				y=0.80pt, 
				x=0.80pt, 
				opacity=1]

  \path[draw, fill] (307.9801,180.3694) --
    (307.9801,168.4845) .. controls (304.0485,159.3804) and (298.9352,156.1848) ..
    (293.5992,154.1035) -- (112.2388,160.4950) -- (117.2988,165.2887) .. controls
    (119.1637,160.8419) and (124.8338,160.9295) .. (124.7556,167.6855) --
    (163.1049,168.4845) -- (167.3659,173.0118) -- (274.0968,172.7077) --
    (274.1882,180.3694) -- cycle(335.4106,157.2992) -- (343.9326,157.2992) --
    (344.1989,150.3751) -- (348.9926,150.3751) -- (349.5252,157.2992) --
    (355.3841,157.4324) -- (355.3841,151.4403) -- (358.5799,151.4403) --
    (358.5799,155.1687) -- (360.7104,155.1687) -- (360.7104,147.9782) --
    (314.9043,148.2445) -- (323.6281,157.2992) -- (327.6065,157.2992) -- cycle;

  \path[draw, fill] (119.8883,163.2551) .. controls
    (118.6100,163.9621) and (118.1447,165.5705) .. (118.8481,166.8508) .. controls
    (119.5514,168.1311) and (121.1585,168.6009) .. (122.4408,167.9013) .. controls
    (123.7231,167.2017) and (124.1976,165.5960) .. (123.5017,164.3117) .. controls
    (122.8058,163.0275) and (121.2015,162.5483) .. (119.9152,163.2405);

  \path[draw] (307.9801,168.4845) --
    (327.7397,168.4845) -- (327.6065,157.2992) -- (335.4106,157.2992) --
    (335.5437,174.9596) -- (327.7397,180.3694) -- (307.9801,180.3694) --
    (307.9801,180.3694);

		% Diaphragme haut

  \path[draw, fill=black] (361.1090,184.7353) -- (361.1090,188.9964) ..
    controls (359.9614,189.7912) and (359.7384,190.6138) .. (359.8023,191.5889) ..
    controls (359.8571,192.6202) and (360.8812,193.8134) .. (362.0256,193.8491) ..
    controls (363.7594,193.8077) and (364.8435,192.0043) .. (364.6015,190.6150) ..
    controls (364.3575,189.8703) and (364.1411,189.5012) .. (363.2395,188.7300) --
    (362.9732,182.6048) .. controls (355.1783,174.5135) and (363.0164,170.0973) ..
    (365.5701,169.1559) -- (365.5546,166.5318) -- (366.9017,166.4928) --
    (366.8684,160.3176) -- (365.4536,160.3176) -- (365.5701,147.9839) --
    (361.3090,147.9839) -- (361.0427,155.3075) -- (359.1785,155.1744) --
    (359.0454,152.7776) -- (359.1785,151.3129) -- (355.8496,151.5792) --
    (355.7164,157.1718) -- (356.3822,161.8322) .. controls (357.5230,163.9268) and
    (359.0242,164.5799) .. (360.5101,165.2943) .. controls (356.9991,169.6393) and
    (356.0054,180.1886) .. (361.1089,184.7353) -- (361.1089,184.7354) -- cycle;

		%tube de venturi

  \path[draw] (307.9801,107.9315) -- (307.9801,119.8164)
    .. controls (304.0485,128.9205) and (298.9352,132.1161) .. (293.5992,134.1974)
    -- (112.2388,127.8058) -- (117.2988,123.0122) .. controls (119.1637,127.4590)
    and (124.8338,127.3714) .. (124.7556,120.6154) -- (163.1049,119.8164) --
    (167.3659,115.2890) -- (274.0968,115.5932) -- (274.1882,107.9315) --
    cycle(335.4106,131.0016) -- (343.9326,131.0016) -- (344.1989,137.9258) --
    (348.9926,137.9258) -- (349.5252,131.0016) -- (355.3841,130.8685) --
    (355.3841,136.8606) -- (358.5799,136.8606) -- (358.5799,133.1321) --
    (360.7104,133.1321) -- (360.7104,140.3227) -- (314.9043,140.0563) --
    (323.6281,131.0016) -- (327.6065,131.0016) -- cycle;

		% Joint √©tanch√©it√©
			\path[draw] (119.8883,125.0458) ..
    controls (118.6100,124.3388) and (118.1447,122.7303) .. (118.8481,121.4501) ..
    controls (119.5514,120.1698) and (121.1585,119.7000) .. (122.4408,120.3996) ..
    controls (123.7231,121.0992) and (124.1976,122.7049) .. (123.5017,123.9891) ..
    controls (122.8058,125.2734) and (121.2015,125.7526) .. (119.9152,125.0604);

		% Arri√®re tube venturi bas recul√©
  \path[draw] (307.9801,119.8164) -- (327.7397,119.8164)
    -- (327.6065,131.0016) -- (335.4106,131.0016) -- (335.5437,113.3413) --
    (327.7397,107.9315) -- (307.9801,107.9315) -- (307.9801,107.9315);

		%diafragme recul√©
  \path[draw, fill=black]
    (361.1090,103.5655) -- (361.1090,99.3045) .. controls (359.9614,98.5097) and
    (359.7384,97.6871) .. (359.8023,96.7120) .. controls (359.8571,95.6807) and
    (360.8812,94.4874) .. (362.0256,94.4518) .. controls (363.7594,94.4932) and
    (364.8435,96.2966) .. (364.6015,97.6859) .. controls (364.3575,98.4305) and
    (364.1411,98.7997) .. (363.2395,99.5708) -- (362.9732,105.6961) .. controls
    (355.1783,113.7874) and (363.0164,118.2036) .. (365.5701,119.1450) --
    (365.5546,121.7691) -- (366.9017,121.8081) -- (366.8684,127.9833) --
    (365.4536,127.9833) -- (365.5701,140.3170) -- (361.3090,140.3170) --
    (361.0427,132.9933) -- (359.1785,133.1265) -- (359.0454,135.5233) --
    (359.1785,136.9880) -- (355.8496,136.7217) -- (355.7164,131.1291) --
    (356.3822,126.4686) .. controls (357.5230,124.3741) and (359.0242,123.7210) ..
    (360.5101,123.0065) .. controls (356.9991,118.6615) and (356.0054,108.1123) ..
    (361.1089,103.5655) -- (361.1089,103.5655) -- cycle;
		\end{scope}
		}
	}
\tikzset{
	phasitron-coupe/.pic={
\begin{scope}[
		y=0.80pt, 
		x=0.80pt, 
		yscale=1.000000, 
		xscale=1.000000,
		%yshift=-4.05cm,
		%xshift=-6.3cm,
		%cm={{1.33333,0.0,0.0,-1.33333,(-37.795,276.83333)}}
		]

	% Boitier

	\path (28.5455,169.2432) -- (28.5455,118.2586) node [midway] (-Pt) {};
	\path (127.6007,42.7405) -- (165.4593,42.7406) node [midway] (-E) {};
	\path (305.0632,40.0755) -- (342.9219,40.0755) node [midway] (-A) {}; 
	\path (420.6816,145.9054) -- (420.6815,142.3686) node [midway] (-S) {};

  \path[pic actions] 
	(364.7404,207.4257) -- (354.4289,190.6384) 
	.. controls (354.4292,190.5471) and (354.4286,190.4557) .. (354.4289,190.3644) --
    (187.1534,190.3644) .. controls (185.3773,189.6993) and (185.0234,188.6749) ..
    (184.6876,187.6496) -- (184.6876,187.7243) -- (110.6639,187.6496) --
    (102.5443,179.5548) -- (55.5447,179.5548) -- (55.5447,171.4351) --
    (47.4500,171.4351) -- (47.4500,178.9321) -- (28.5455,178.9321) --
    (28.5455,169.2432)
		-- (102.3450,169.2432) -- (112.3327,169.2432) --
    (112.3327,169.6916) -- (118.2108,175.5448) -- (171.7110,175.5448) --
    (171.7110,174.3243) -- (184.9367,174.3243) -- (184.9367,181.4228) --
    (353.8311,181.4228) -- (358.8873,192.9547) -- (369.3980,192.9547) --
		(369.3980,181.4228) -- (369.3980,145.9054) -- (420.6816,145.9054) --
    (420.6816,150.7374) -- (419.1373,151.6340) -- (415.5258,151.6340) --
    (415.5258,149.3924) -- (411.9891,149.3924) -- (411.9891,151.9827) --
    (409.3488,151.9827) -- (409.3488,153.7013) -- (409.3488,186.5785) .. controls
    (408.9302,191.6915) and (404.3248,194.0616) .. (399.7597,193.9759) .. controls
    (395.1945,193.8903) and (390.6720,191.3490) .. (390.4444,186.5785) --
    (390.4444,172.4065) .. controls (390.5165,169.0913) and (385.5654,168.2436) ..
    (383.6448,170.4139) -- (383.5951,207.4257) -- (364.7404,207.4257) --
    cycle

		(369.3980,142.3686) -- (369.3980,94.9955) --
    (358.8873,94.9955) -- (353.6070,106.8512) -- (342.9219,106.8512) --
		(342.9219,102.5423) -- (342.9219,40.0755) -- (346.0601,40.0755) --
    (349.4724,44.5339) -- (349.4724,46.6011) -- (346.0601,46.6011) --
    (346.0601,50.8602) -- (349.4724,50.8602) -- (349.4724,97.5858) --
    (354.4289,97.5858) .. controls (354.4287,97.4945) and (354.4291,97.4031) ..
    (354.4289,97.3118) -- (364.7404,80.5245) -- (383.5951,80.5245) --
    (383.6448,117.5363) .. controls (385.5654,119.7066) and (390.5165,118.8590) ..
    (390.4444,115.5437) -- (390.4444,101.3965) .. controls (390.8996,91.8556) and
    (408.5114,91.1706) .. (409.3488,101.3965) -- (409.3488,134.2738) --
    (409.3488,135.9675) -- (411.9890,135.9675) -- (411.9890,139.0809) --
    (415.5257,139.0809) -- (415.5257,136.6151) -- (419.1373,136.6151) --
		(420.6815,137.5118) -- (420.6815,142.3686) --
    cycle

		(171.7110,113.5761) --
		(171.7110,112.3806) -- (165.4593,112.3806) -- (165.4593,42.7406) -- (168.5977,42.7406) --
    (172.0099,47.1989) -- (172.0099,49.2662) -- (168.5977,49.2662) --
    (168.5977,53.5253) -- (172.0099,53.5253) -- (172.0099,100.2259) --
    (184.6876,100.2259) -- (184.6876,100.2757) .. controls (185.0234,99.2505) and
    (185.3773,98.2510) .. (187.1534,97.5858) -- (298.4877,97.5858) --
    (298.4877,50.8602) -- (301.9000,50.8602) -- (301.9000,46.6012) --
    (298.4877,46.6012) -- (298.4877,44.5339) -- (301.9000,40.0755) --
		(305.0632,40.0755) -- (305.0632,106.8512) --
    (184.9367,106.8512) -- (184.9367,113.5761) -- cycle

		(28.5455,118.2586) -- (28.5455,109.0182) -- (47.4500,109.0182) --
    (47.4500,116.4903) -- (55.5447,116.4903) -- (55.5447,108.3954) --
    (67.7491,108.3954) -- (67.7491,105.7553) -- (70.8626,105.7553) --
    (70.8626,102.2185) -- (68.3967,102.2185) -- (68.3967,98.6069) --
    (69.2934,97.0628) -- (75.2959,97.0628) -- (76.5164,97.0628) --
    (82.5190,97.0628) -- (83.4157,98.6069) -- (83.4157,102.2185) --
    (81.1740,102.2185) -- (81.1740,105.7553) -- (83.7643,105.7553) --
    (83.7643,108.3954) -- (102.5443,108.3954) -- (110.6639,100.2757) --
    (121.0252,100.2757) -- (121.0252,53.5253) -- (124.4375,53.5253) --
    (124.4375,49.2662) -- (121.0252,49.2662) -- (121.0252,47.1989) --
		(124.4375,42.7405) -- (127.6007,42.7405) -- (127.6007,42.7654) --
    (127.6007,105.9794) -- (127.6007,112.3806) -- (118.2108,112.3806) --
    (112.3327,118.2586) -- (102.3450,118.2586) -- 
		cycle

		;

\end{scope}
}

}
\tikzset{
	darc/.style={
		start angle=180, 
		end angle=0, 
		radius=0.2
	},
	obturateur/.pic={
	\draw [ultra thick] (0,0) -- (0, 2.0) ;
	\fill (2.7mm,2.0) arc [start angle=0, end angle=180, radius=2.7mm];
	},
	obturateur-haut/.pic={
		\pic at (0,.45) {obturateur};
		\draw [diaphragme, bend left=15] (-1.75,0) to (0,.45);
		\draw [diaphragme, bend right=15] (1.75,0) to (0,.45);
	},
	obturateur-bas/.pic={
		\draw [diaphragme]
		(-1.75,0) -- ++(0.5,0) 
		arc [darc] -- (0,0)
		-- (0.85,0) arc [darc] -- (1.75,0);
		\pic {obturateur};
	},
	cartouche/.pic={
		\draw [ rounded corners=1mm ]
		(1.75, -.5)
		-- ++(0,1)
		-- ++(-.75,.75)
		-- ++(0,1.5)
		-- ++(-2,0)
		-- ++(0,-1.5)
		-- ++(-.75,-.75)
		-- ++(0, -1)
		-- cycle;

		\draw [connector] (0, -.5) |- ++(.7,-.7) coordinate (S);

		\draw [fill=white] (-.75,1.5) rectangle ++(1.5,1);
		\draw [connector] (0, 2.5) -- ++(0, .75) coordinate (I);
		\draw [connector] (.75, 2.1) -- ++(.75, 0) coordinate (O);
	},
	diaphragme/.style={
		ultra thick
	},
	connector/.style={
		double=white,
		double distance=5mm,
		shorten <=-.2pt
	}
}

\def\CHeight{10.5}
\tikzset{
	fp/.pic={
		% Humidifier body
		\draw [rounded corners, fill=black!4] (-6,-6) rectangle (6,6);

		% Humidifying chamber
		\draw (-5,6) 
			to[rounded corners] (-5,\CHeight)
			to[rounded corners] ++(10,0)
			to (5,6)
			to (-5,6);

		\draw (-3.5, \CHeight) rectangle ++(22mm, 22mm);
		\draw (3.5, \CHeight) rectangle ++(-22mm, 22mm);

		% Connectors

		\coordinate (-CL) at ([xshift=11mm]-3.5, \CHeight cm + 22mm);
		\coordinate (-CR) at ([xshift=-11mm]3.5, \CHeight cm + 22mm);

		% Buttons

		\draw [fill=black!12, draw=black!50] (-4,4) circle[radius=8mm];
		\draw [fill=black!12, draw=black!50] (4,4) circle[radius=8mm];
		\draw [fill=black!12, draw=black!50] (4,1) circle[radius=8mm];

		% Screen

		\draw [rounded corners=1.5, black!60] (-1.8,2) rectangle ++(3.6,2.3);
	}
}

\tikzset{
	neb/.pic={
		\draw (0,0) ++(-11mm,0) rectangle (11mm,18mm);
		\draw (-28mm, 40mm) -- (-28mm, 18mm)
		-- (28mm, 18mm) -- (28mm, 40mm) -- cycle;
		%Couvercle
		\draw [rounded corners=0.7mm](0,0) 
		++(-40mm,0) rectangle ++(80mm,-5mm);
		%R√©servoir
		\draw [even odd rule](-33mm,-5mm)
		-- (-25mm,-85mm)
		-- (-19mm, -85mm) 
		-- (-19mm, -70mm) 
		-- (19mm, -70mm) 
		-- (19mm, -85mm)
		-- (25mm,-85mm)
		-- (33mm,-5mm)
		-- cycle;
		%Connecteur n√©bulisation
		\draw (-2mm, -70mm) rectangle (2mm, -77mm);
		\coordinate (-CL) at (-28mm,29mm);
		\coordinate (-CR) at (28mm,29mm);
		\coordinate (-CN) at (0,-77mm);
	}
}

\tikzset{
	manifold/.pic={
		% Left connector
		\draw (0,-14mm) rectangle (28mm,14mm);
		\coordinate (-LC) at (0,0);

		% Top connector
		\draw (28mm, 14mm) rectangle (56mm, 42mm);
		\coordinate (-TC) at (42mm,42mm);

		% Center
		\draw (28mm, -14mm) rectangle (56mm, 14mm);

		% Right connector
		\draw (56mm, -11mm) rectangle ++(22mm, 22mm);
		\coordinate (-RC) at (78mm,0mm);

		% Bottom connector
		\draw (31mm, -14mm) rectangle ++(22mm, -22mm);
		\coordinate (-BC) at (42mm,-36mm);
	}
}


\tikzset{
	bag/.pic={
		\draw [looseness=0.7](-11mm,0) to [out=250, in=180] (0,-20cm) 
		to [out=0, in=290](11mm,0);
	}
}
